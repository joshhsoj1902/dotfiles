---
description: Oh My Zsh configuration, plugins, themes, and customization guidelines
alwaysApply: false
---

# Oh My Zsh Rules

## Overview

[Oh My Zsh](https://ohmyz.sh/) is an open source, community-driven framework for managing your zsh configuration. It comes bundled with thousands of helpful functions, helpers, plugins, themes, and a few things that make you shout "OH MY ZSHELL!"

## Installation

Oh My Zsh requires `zsh` to be installed. Check if you have it:

```bash
zsh --version
```

If not installed, see [Installing Zsh](https://github.com/ohmyzsh/ohmyzsh/wiki/Installing-ZSH).

Install Oh My Zsh using one of these methods:

```bash
# Using curl
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

# Using wget
sh -c "$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

# Using fetch
sh -c "$(fetch -o - https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
```

**Note**: The installer will rename an existing `.zshrc` file to `.zshrc.pre-oh-my-zsh`.

For countries that block `raw.githubusercontent.com` (e.g., India, China), use the mirrored URL:

```bash
sh -c "$(curl -fsSL https://install.ohmyz.sh)"
```

## Directory Structure

Oh My Zsh is installed to `~/.oh-my-zsh/` with the following structure:

```
~/.oh-my-zsh/
├── oh-my-zsh.sh          # Main initialization script
├── lib/                  # Core library functions
├── plugins/              # Built-in plugins
├── themes/               # Built-in themes
└── custom/               # User customizations (not overwritten on updates)
    ├── plugins/          # Custom plugins
    ├── themes/           # Custom themes
    └── lib/              # Custom library functions
```

## Configuration

### Main Configuration File

Oh My Zsh configuration is typically done in `~/.zshrc`. The main configuration variables are:

```bash
# Path to oh-my-zsh installation
export ZSH=$HOME/.oh-my-zsh

# Custom directory location
ZSH_CUSTOM=$HOME/.zsh/custom

# Theme to load (see https://github.com/ohmyzsh/ohmyzsh/wiki/Themes)
ZSH_THEME="robbyrussell"

# Plugins to load (plugins can be found in ~/.oh-my-zsh/plugins/)
plugins=(
  git
  docker
  kubectl
)

# Source oh-my-zsh
source $ZSH/oh-my-zsh.sh
```

### Plugin Loading Order

**Important**: Some plugins must be loaded in a specific order:
- `zsh-syntax-highlighting` must be loaded **last** (after all other plugins)
- `zsh-autosuggestions` should be loaded before `zsh-syntax-highlighting`

Example:

```bash
plugins=(
  git
  docker
  zsh-autosuggestions
)

# zsh-syntax-highlighting must be last
plugins+=(
  zsh-syntax-highlighting
)
```

### Custom Directory Location

By default, Oh My Zsh uses `~/.oh-my-zsh/custom/` for user customizations. You can change this:

```bash
ZSH_CUSTOM=$HOME/.zsh/custom
```

**Note**: If you change `ZSH_CUSTOM`, Oh My Zsh will automatically source all `.zsh` files in:
- `$ZSH_CUSTOM/*.zsh`
- `$ZSH_CUSTOM/**/*.zsh`

To avoid auto-sourcing, place files in a subdirectory that won't be auto-sourced (e.g., `$ZSH_CUSTOM/config/`).

## Plugins

### Built-in Plugins

Oh My Zsh comes with many built-in plugins located in `~/.oh-my-zsh/plugins/`. See [Plugins Overview](https://github.com/ohmyzsh/ohmyzsh/wiki/Plugins) for a complete list.

Popular plugins include:
- `git` - Git aliases and functions
- `docker` - Docker aliases and completions
- `kubectl` - Kubernetes kubectl completions
- `colored-man-pages` - Colorized man pages
- `extract` - Extract various archive formats
- `history-substring-search` - History search functionality

### External Plugins

External plugins are installed in `$ZSH_CUSTOM/plugins/`. Popular external plugins:

- **zsh-syntax-highlighting** - Syntax highlighting for commands
- **zsh-autosuggestions** - Suggests commands based on history
- **zsh-completions** - Additional completion definitions
- **alias-tips** - Reminds you of aliases you could use

To use an external plugin:

1. Clone or install it to `$ZSH_CUSTOM/plugins/plugin-name/`
2. Add it to the `plugins` array in `~/.zshrc`

Example:

```bash
plugins=(
  git
  zsh-autosuggestions
  zsh-syntax-highlighting
)
```

### Plugin Development

Plugins are simple shell scripts. A basic plugin structure:

```bash
# $ZSH_CUSTOM/plugins/myplugin/myplugin.plugin.zsh

# Plugin metadata
# Name: myplugin
# Description: My custom plugin

# Plugin code
function myplugin_function() {
  echo "Hello from myplugin"
}

# Aliases
alias mp='myplugin_function'
```

## Themes

### Built-in Themes

Oh My Zsh includes many themes in `~/.oh-my-zsh/themes/`. See [Themes](https://github.com/ohmyzsh/ohmyzsh/wiki/Themes) for a complete list.

Popular themes:
- `robbyrussell` - Default theme (simple and clean)
- `agnoster` - Popular powerline-style theme
- `powerlevel10k` - Fast and highly customizable (external theme)

### External Themes

External themes are installed in `$ZSH_CUSTOM/themes/`. Popular external themes:

- **powerlevel10k** - Fast and feature-rich prompt
- **spaceship-prompt** - Minimal and fast prompt
- **pure** - Pretty, minimal and fast prompt

To use an external theme:

1. Install it to `$ZSH_CUSTOM/themes/theme-name/`
2. Set `ZSH_THEME="theme-name"` in `~/.zshrc`

### Theme Development

Themes are shell scripts that set the `PROMPT` variable. Basic structure:

```bash
# $ZSH_CUSTOM/themes/mytheme.zsh-theme

PROMPT='%F{green}%n@%m%f %F{blue}%~%f %# '
```

## Customization

### Custom Functions

Place custom functions in `$ZSH_CUSTOM/lib/` or source them from your `.zshrc`:

```bash
# In ~/.zshrc (after sourcing oh-my-zsh.sh)
source ~/.zsh/custom/functions.zsh
```

### Custom Aliases

Place aliases in `$ZSH_CUSTOM/aliases.zsh` or source them from your `.zshrc`:

```bash
# In ~/.zshrc (after sourcing oh-my-zsh.sh)
source ~/.zsh/custom/aliases.zsh
```

### Environment Variables

Set environment variables in `~/.zshrc` before or after sourcing `oh-my-zsh.sh`:

```bash
export EDITOR='vim'
export PATH="$HOME/bin:$PATH"
```

## Best Practices

1. **Keep `.zshrc` organized**
   - Use modular files for different concerns (aliases, functions, paths, etc.)
   - Source them from `.zshrc` in a logical order

2. **Plugin loading order matters**
   - Load `zsh-syntax-highlighting` last
   - Load `zsh-autosuggestions` before syntax highlighting

3. **Avoid modifying Oh My Zsh core files**
   - Changes in `~/.oh-my-zsh/` will be overwritten on updates
   - Use `$ZSH_CUSTOM/` for all customizations

4. **Use conditional loading**
   - Check if plugins/themes exist before sourcing
   - Use conditionals for OS-specific configurations

5. **Performance considerations**
   - Don't load too many plugins (each adds startup time)
   - Use lazy loading for heavy plugins when possible
   - Consider using `powerlevel10k` for faster prompt rendering

6. **Version control**
   - Commit your `.zshrc` and custom files
   - Don't commit `~/.oh-my-zsh/` (it's managed separately)
   - Use `.chezmoiignore` or `.gitignore` to exclude generated files

## Troubleshooting

### Common Issues

1. **Plugins not working**
   - Check plugin name spelling in `plugins` array
   - Verify plugin exists in `~/.oh-my-zsh/plugins/` or `$ZSH_CUSTOM/plugins/`
   - Check plugin loading order (syntax-highlighting must be last)

2. **Theme not loading**
   - Verify theme name matches directory name
   - Check theme file exists and is readable
   - Ensure `ZSH_THEME` is set before sourcing `oh-my-zsh.sh`

3. **Slow startup**
   - Reduce number of plugins
   - Check for slow commands in `.zshrc`
   - Use `zprof` to profile startup: add `zmodload zsh/zprof` at top of `.zshrc` and `zprof` at bottom

4. **Completion issues**
   - Run `rm ~/.zcompdump*` to clear completion cache
   - Ensure `compinit` is called (Oh My Zsh does this automatically)

### Debugging

Enable debug mode:

```bash
# Add to ~/.zshrc before sourcing oh-my-zsh.sh
export ZSH_DEBUG=1
```

## Repository-Specific Configuration

In this repository, Oh My Zsh is configured as follows:

### Configuration File Location

Oh My Zsh configuration is in `dot_zsh/custom/config/oh-my-zsh-config.zsh.tmpl`, which is sourced from `dot_zshrc.tmpl`:

```55:58:dot_zshrc.tmpl
# Oh My Zsh configuration
if [[ -f ~/.zsh/custom/config/oh-my-zsh-config.zsh ]]; then
  source ~/.zsh/custom/config/oh-my-zsh-config.zsh
fi
```

### Custom Directory

The custom directory is set to `~/.zsh/custom/` to avoid auto-sourcing files in `config/`:

```9:10:dot_zsh/custom/config/oh-my-zsh-config.zsh.tmpl
# Custom folder location - needed for plugins to be found
# Note: Our custom config files are in config/ subdirectory to avoid auto-sourcing
ZSH_CUSTOM=$HOME/.zsh/custom
```

### Plugin Management

Plugins are managed via chezmoi external files (`.chezmoiexternal.toml.tmpl`):
- Oh My Zsh core: `~/.oh-my-zsh/`
- External plugins: `~/.zsh/custom/plugins/`
  - `zsh-syntax-highlighting`
  - `zsh-autosuggestions`
  - `zsh-completions`
  - `alias-tips`
  - `apt` (Linux only)

### Theme

The repository uses a custom theme `dave` located in `dot_zsh/custom/themes/dave.zsh-theme`:

```13:14:dot_zsh/custom/config/oh-my-zsh-config.zsh.tmpl
# Set name of the theme to load
# See https://github.com/robbyrussell/oh-my-zsh/wiki/Themes
ZSH_THEME="dave"
```

### Plugin Configuration

Plugins are configured with OS-specific conditionals:

```17:28:dot_zsh/custom/config/oh-my-zsh-config.zsh.tmpl
# Which plugins would you like to load?
plugins=(
  git
  github
  colored-man-pages
  docker
  docker-compose
  alias-tips
  zsh-autosuggestions
{{- if eq .chezmoi.os "linux" }}
  apt debian
{{- end }}
)
```

### Completion Path

Additional completions are added to `fpath` before sourcing Oh My Zsh:

```35:36:dot_zsh/custom/config/oh-my-zsh-config.zsh.tmpl
# Add zsh-completions to fpath (must be before oh-my-zsh.sh is sourced)
fpath+=($HOME/.zsh/custom/plugins/zsh-completions/src)
```

## References

- [Oh My Zsh Wiki](https://github.com/ohmyzsh/ohmyzsh/wiki)
- [Oh My Zsh Homepage](https://ohmyz.sh/)
- [Plugins Overview](https://github.com/ohmyzsh/ohmyzsh/wiki/Plugins)
- [Themes](https://github.com/ohmyzsh/ohmyzsh/wiki/Themes)
- [Customization](https://github.com/ohmyzsh/ohmyzsh/wiki/Customization)
- [FAQ](https://github.com/ohmyzsh/ohmyzsh/wiki/FAQ)
- [Troubleshooting](https://github.com/ohmyzsh/ohmyzsh/wiki/Troubleshooting)
